<!doctype html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Currency Calculator</title>
<style>
  :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
  body { margin: 24px; }
  .card { max-width: 800px; margin: 0 auto; padding: 20px; border: 1px solid #ddd; border-radius: 16px; }
  .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin: 12px 0; }
  label { font-size: 12px; opacity: .75; display:block; margin-bottom:6px }
  input, select { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 10px; font-size: 16px; }
  .result { font-size: 20px; margin-top: 12px; }
  .meta { font-size: 12px; opacity: .7; margin-top: 8px; }
</style>
<div class="card">
  <h1>Currency Calculator</h1>
  <div class="row">
    <div>
      <label>Amount</label>
      <input id="amount" type="number" value="100" min="0" step="0.01">
    </div>
    <div>
      <label>From</label>
      <select id="from"></select>
    </div>
  </div>
  <div class="row">
    <div>
      <label>To</label>
      <select id="to"></select>
    </div>
    <div>
      <label>&nbsp;</label>
      <input id="out" class="result" type="text" readonly>
    </div>
  </div>
  <div class="meta" id="meta">Loading rates…</div>
</div>

<script>
(async () => {
  // Public, no-key example endpoint. Swap for your preferred provider if needed.
  const API = 'https://api.exchangerate.host/latest?access_key=58ef342f902990a7be5c86bf40df1371';
  const amountEl = document.getElementById('amount');
  const fromEl = document.getElementById('from');
  const toEl = document.getElementById('to');
  const outEl = document.getElementById('out');
  const metaEl = document.getElementById('meta');

  try {
    const res = await fetch(API, { cache: 'no-store' });
    const data = await res.json();
    const base = data.base;
    const rates = data.rates;

    // Build currency list (include base)
    const currencies = [base, ...Object.keys(rates)].sort();
    for (const c of currencies) {
      const opt1 = new Option(c, c); fromEl.add(opt1.cloneNode(true));
      const opt2 = new Option(c, c); toEl.add(opt2.cloneNode(true));
    }
    fromEl.value = 'EUR';
    toEl.value = 'USD';

    const compute = () => {
      const amt = parseFloat(amountEl.value || '0');
      const from = fromEl.value;
      const to = toEl.value;
      const rFrom = from === base ? 1 : rates[from];
      const rTo = to === base ? 1 : rates[to];
      if (!rFrom || !rTo) { outEl.value = '—'; return; }
      const result = amt * (rTo / rFrom);
      outEl.value = isFinite(result) ? result.toFixed(2) : '—';
    };

    [amountEl, fromEl, toEl].forEach(el => el.addEventListener('input', compute));
    compute();

    metaEl.textContent = `Base ${base} · Updated ${new Date(data.date).toLocaleDateString()}`;
  } catch (e) {
    metaEl.textContent = 'Could not load live rates. Try again later.';
  }
})();
</script>
</html>
